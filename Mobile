
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	//Вставить содержимое обработчика
	//Сообщить("1");
	
КонецПроцедуры

&НаКлиенте
Процедура Войти(Команда)
	// Вставить содержимое обработчика.
	Если ТекКод = КодСМС Тогда
		Сообщить("Код верный");
		АвторизацияПройдена=Истина;
		Элементы.Группа3.Видимость=Ложь;
		ПолучитьДанныеСотрудника();
		Элементы.Группа4.Видимость=Истина;
	Иначе
		ПоказатьПредупреждение(,"Код СМС не верный",5);
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ПолучитьКод(Команда)
	// Вставить содержимое обработчика.
	Результат = ЗапроситьКодСМС();
	Если ТипЗнч(Результат)=Тип("Число") Тогда
		ТекКод = Результат;
	иначе
		Сообщить(Результат);
	КонецЕсли;
	
КонецПроцедуры
&НаСервере
Функция ЗапроситьКодСМС()
	ТекстОшибки = "";
	ТекОтвет = ОбщийМодуль.ЗапросВебСервиса("SendSMS", ТабельныйНомер, ТекстОшибки);
	Если ТекстОшибки<>"" Тогда
		Возврат ТекстОшибки;
	Иначе
		Возврат ТекОтвет;
	КонецЕсли;
КонецФункции
